import{j as n}from"./jsx-runtime-ffb262ed.js";import{r as l}from"./index-76fb7be0.js";import{g as k}from"./_commonjsHelpers-de833af9.js";import{t as j}from"./toString-a79d3543.js";import{T as c}from"./TIcon-5bca6fbe.js";import{u as E}from"./UseValidator-1d683c89.js";var M=j,K=0;function z(e){var r=++K;return M(e)+r}var D=z;const I=k(D),s=l.forwardRef((e,r)=>{const[d,y]=l.useState(!1),[o,m]=l.useState(!1),t=E(e.noTrim?e.value:e.value.trim(),e.rules,e.successMessage),i=l.useRef(null),f=I();l.useImperativeHandle(r,()=>({focus(){var a;(a=i==null?void 0:i.current)==null||a.focus()},blur(){var a;(a=i==null?void 0:i.current)==null||a.blur()},validate(){return t.validate()},manualValidate(a,u){t.manualValidate(a,u)},clearValidation(){t.clearValidation()},getValidateResult(){return t.result},getValidateMessage(){return t.message}}));const b=l.useCallback(a=>{const u=e.noTrim?a.target.value.length:a.target.value.trim().length;if(e.counter&&u>e.counter){e.onChange(a.target.value.substring(0,e.counter));return}e.onChange(a.target.value)},[e]),h=l.useCallback(()=>{t.clearValidation(),m(!0)},[t]),g=l.useCallback(()=>{!e.noTrim&&e.value!==e.value.trim()&&e.onChange(e.value.trim()),e.lazy||t.validate(),m(!1),e.onBlur&&e.onBlur()},[e,t]),v=l.useCallback(a=>{a.key==="Enter"&&e.onKeyDownEnter&&e.onKeyDownEnter(a),e.onKeyDown&&e.onKeyDown(a)},[e]),_=l.useCallback(a=>{a==null||a.stopPropagation(),e.onChange&&e.onChange(""),e.onClear&&e.onClear()},[e]),x=l.useCallback(()=>{y(!d)},[d]),V=l.useMemo(()=>e.password&&!d?"password":"text",[e.password,d]),C=l.useMemo(()=>{var a,u;return e.noTrim?(a=e.value)==null?void 0:a.length:(u=e.value)==null?void 0:u.trim().length},[e.noTrim,e.value]),q=l.useMemo(()=>{const a=[];return e.className&&a.push(e.className),e.disabled&&a.push("t-text-field--disabled"),t.result||a.push("t-text-field--failure"),t.result&&t.message&&a.push("t-text-field--success"),o&&a.push("t-text-field--focused"),a.push(`t-text-field--${e.type}`),a.join(" ")},[e.className,e.disabled,e.type,t.result,t.message,o]),w=l.useMemo(()=>{const a=[];return e.disabled&&a.push("t-text-field__container__input--disabled"),a.join(" ")},[e.disabled]),T=l.useMemo(()=>{const a=[];return e.required&&a.push("t-text-field__label--required"),a.join(" ")},[e.required]),N=l.useMemo(()=>{let a={};return e.style&&(a={...e.style}),e.width&&(a={...a,width:e.width}),a},[e.style,e.width]);return n.jsxs("div",{className:`t-text-field ${q}`,style:N,id:e.id,"data-testid":"text-field-root",children:[e.label&&n.jsx("label",{className:`t-text-field__label ${T}`,htmlFor:f,children:e.label}),n.jsxs("div",{className:"t-text-field__container",children:[n.jsx("input",{id:f,ref:i,type:V,tabIndex:e.disabled?-1:0,className:`t-text-field__container__input ${w}`,disabled:e.disabled,placeholder:e.disabled?"":e.placeholder,value:e.value,onChange:b,onKeyDown:v,onFocus:h,onBlur:g,autoComplete:e.autoComplete,"data-testid":"text-field-input"}),e.clearable&&e.value&&e.value.length>0&&!e.disabled&&n.jsx(c,{small:!0,className:"t-text-field__container__action-icon",clickable:!0,onClick:_,children:"clear"}),e.searchable&&!e.disabled&&n.jsx(c,{small:!0,className:"t-text-field__container__action-icon",clickable:!0,onClick:e.onClickSearch,children:"search"}),e.password&&!e.disabled&&n.jsx(c,{small:!0,className:"t-text-field__container__action-icon",clickable:!0,onClick:x,children:d?"visibility_off":"visibility"})]}),n.jsxs("div",{className:"t-text-field__details",children:[n.jsx("div",{className:"t-text-field__details__message","data-testid":"text-field-message",children:t.message||e.hint}),n.jsx("div",{className:"t-text-field__details__counter","data-testid":"text-field-counter",children:e.counter&&!e.disabled&&`${C} / ${e.counter}`})]})]})});s.defaultProps={type:"outline",lazy:!0};s.displayName="TTextField";try{s.displayName="TTextField",s.__docgenInfo={description:"",displayName:"TTextField",props:{type:{defaultValue:{value:"outline"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"outline"'},{value:'"underline"'}]}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},password:{defaultValue:null,description:"",name:"password",required:!1,type:{name:"boolean"}},clearable:{defaultValue:null,description:"",name:"clearable",required:!1,type:{name:"boolean"}},searchable:{defaultValue:null,description:"",name:"searchable",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},noTrim:{defaultValue:null,description:"",name:"noTrim",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},hint:{defaultValue:null,description:"",name:"hint",required:!1,type:{name:"string"}},counter:{defaultValue:null,description:"",name:"counter",required:!1,type:{name:"number"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string"}},autoComplete:{defaultValue:null,description:"",name:"autoComplete",required:!1,type:{name:"enum",value:[{value:'"new-password"'},{value:'"off"'}]}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"() => void"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"(event: KeyboardEvent<HTMLInputElement>) => void"}},onKeyDownEnter:{defaultValue:null,description:"",name:"onKeyDownEnter",required:!1,type:{name:"(event: KeyboardEvent<HTMLInputElement>) => void"}},onClickSearch:{defaultValue:null,description:"",name:"onClickSearch",required:!1,type:{name:"(event: MouseEvent<Element, MouseEvent>) => void"}},onClear:{defaultValue:null,description:"",name:"onClear",required:!1,type:{name:"() => void"}},lazy:{defaultValue:{value:"true"},description:"",name:"lazy",required:!1,type:{name:"boolean"}},rules:{defaultValue:null,description:"",name:"rules",required:!1,type:{name:"((value: any) => string | true)[]"}},successMessage:{defaultValue:null,description:"",name:"successMessage",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}}}}}catch{}export{s as T};
//# sourceMappingURL=TTextField-3738bb99.js.map
