import{j as t}from"./jsx-runtime-CKrituN3.js";import{r as l}from"./index-CBqU2yxZ.js";import{u as E}from"./uniqueId-BdmaqBQH.js";import{T as m}from"./TIcon-DX3nHo9a.js";import{u as M}from"./UseValidator-XS2alT9g.js";import{t as v}from"./ThemeToken.module-BX06fUfM.js";const r=l.forwardRef((e,V)=>{const[s,C]=l.useState(!1),[c,f]=l.useState(!1),n=M(e.noTrim?e.value:e.value.trim(),e.rules,e.successMessage),u=l.useRef(null),d=l.useRef(null),o=E();l.useImperativeHandle(V,()=>({focus(){var a,i;(a=u==null?void 0:u.current)==null||a.focus(),(i=d==null?void 0:d.current)==null||i.focus()},blur(){var a,i;(a=u==null?void 0:u.current)==null||a.blur(),(i=d==null?void 0:d.current)==null||i.blur()},validate(){return n.validate()},manualValidate(a,i){n.manualValidate(a,i)},clearValidation(){n.clearValidation()},getValidateResult(){return n.result},getValidateMessage(){return n.message}}));const y=l.useCallback(a=>{const i=e.noTrim?a.target.value.length:a.target.value.trim().length;if(e.counter&&i>e.counter){e.onChange(a.target.value.substring(0,e.counter));return}e.onChange(a.target.value)},[e]),_=l.useCallback(()=>{n.clearValidation(),f(!0),e.onFocus&&e.onFocus()},[e,n]),b=l.useCallback(()=>{!e.noTrim&&e.value!==e.value.trim()&&e.onChange(e.value.trim()),e.lazy||n.validate(),f(!1),e.onBlur&&e.onBlur()},[e,n]),h=l.useCallback(a=>{a.key==="Enter"&&e.onKeyDownEnter&&e.onKeyDownEnter(a),e.onKeyDown&&e.onKeyDown(a)},[e]),q=l.useCallback(a=>{a==null||a.stopPropagation(),e.onChange&&e.onChange(""),e.onClear&&e.onClear()},[e]),w=l.useCallback(()=>{C(!s)},[s]),T=l.useMemo(()=>e.password&&!s?"password":"text",[e.password,s]),x=l.useMemo(()=>{var a,i;return e.noTrim?(a=e.value)==null?void 0:a.length:(i=e.value)==null?void 0:i.trim().length},[e.noTrim,e.value]),N=l.useMemo(()=>{const a=[];return e.className&&a.push(e.className),e.multiline&&a.push("t-text-field__multiline"),e.disabled&&a.push("t-text-field--disabled"),e.readOnly&&a.push("t-text-field--read-only"),e.dense&&a.push("t-text-field--dense"),n.result||a.push("t-text-field--failure"),n.result&&n.message&&a.push("t-text-field--success"),c&&a.push("t-text-field--focused"),a.join(" ")},[e.className,e.multiline,e.disabled,e.readOnly,e.dense,n.result,n.message,c]),g=l.useMemo(()=>{const a=[];return e.disabled&&a.push("t-text-field__container__input--disabled"),e.readOnly&&a.push("t-text-field__container__input--read-only"),a.join(" ")},[e.disabled,e.readOnly]),j=l.useMemo(()=>{const a=[];return e.required&&a.push("t-text-field__label--required"),a.join(" ")},[e.required]),k=l.useMemo(()=>{let a={};return e.style&&(a={...e.style}),e.width&&(a={...a,width:e.width}),a},[e.style,e.width]);return t.jsxs("div",{className:`t-text-field ${N}`,style:k,id:e.id,"data-testid":"text-field-root",children:[e.label&&t.jsx("label",{className:`t-text-field__label ${j}`,htmlFor:o,children:e.label}),t.jsxs("div",{className:"t-text-field__container",children:[e.multiline?t.jsx("textarea",{id:o,ref:d,tabIndex:e.disabled||e.readOnly?-1:0,className:`t-text-field__container__text-area ${g}`,disabled:e.disabled||e.readOnly,placeholder:e.disabled||e.readOnly?"":e.placeholder,value:e.value,onChange:y,onKeyDown:h,onFocus:_,onBlur:b,autoComplete:e.autoComplete,"data-testid":"text-field-text-area",rows:e.rows}):t.jsx("input",{id:o,ref:u,type:T,tabIndex:e.disabled||e.readOnly?-1:0,className:`t-text-field__container__input ${g}`,disabled:e.disabled||e.readOnly,placeholder:e.disabled||e.readOnly?"":e.placeholder,value:e.value,onChange:y,onKeyDown:h,onFocus:_,onBlur:b,autoComplete:e.autoComplete,"data-testid":"text-field-input"}),e.clearable&&e.value&&e.value.length>0&&!e.disabled&&t.jsx(m,{small:!0,className:"t-text-field__container__action-icon",clickable:!0,onClick:q,children:"clear"}),e.searchable&&!e.disabled&&t.jsx(m,{small:!0,className:"t-text-field__container__action-icon",clickable:!0,color:e.value?v.tGrayColor6:v.tGrayColor4,onClick:e.onClickSearch,children:"search"}),e.password&&!e.disabled&&t.jsx(m,{small:!0,className:"t-text-field__container__action-icon",clickable:!0,onClick:w,children:s?"visibility_off":"visibility"}),e.customAction&&t.jsx("div",{className:"t-text-field__container__custom-action-icon",children:e.customAction}),e.counter&&!e.disabled&&!e.multiline&&(c||n.message)&&t.jsxs("div",{className:"t-text-field__container__counter","data-testid":"text-field-counter",children:[t.jsx("span",{className:"t-text-field__container__counter__counted",children:x}),t.jsx("span",{children:`/${e.counter}`})]})]}),t.jsxs("div",{className:"t-text-field__details",children:[t.jsx("div",{className:"t-text-field__details__message","data-testid":"text-field-message",children:n.message||e.hint}),e.counter&&!e.disabled&&e.multiline&&t.jsxs("div",{className:"t-text-field__details__text-area__counter",children:[t.jsx("span",{className:"t-text-field__details__text-area__counter__counted",children:x}),t.jsx("span",{children:`/${e.counter}`})]})]})]})});r.defaultProps={lazy:!0,rows:1};r.displayName="TTextField";try{r.displayName="TTextField",r.__docgenInfo={description:"",displayName:"TTextField",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},password:{defaultValue:null,description:"",name:"password",required:!1,type:{name:"boolean"}},clearable:{defaultValue:null,description:"",name:"clearable",required:!1,type:{name:"boolean"}},searchable:{defaultValue:null,description:"",name:"searchable",required:!1,type:{name:"boolean"}},customAction:{defaultValue:null,description:"",name:"customAction",required:!1,type:{name:"ReactNode"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},noTrim:{defaultValue:null,description:"",name:"noTrim",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},dense:{defaultValue:null,description:"",name:"dense",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},hint:{defaultValue:null,description:"",name:"hint",required:!1,type:{name:"string"}},counter:{defaultValue:null,description:"",name:"counter",required:!1,type:{name:"number"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string"}},autoComplete:{defaultValue:null,description:"",name:"autoComplete",required:!1,type:{name:"enum",value:[{value:'"new-password"'},{value:'"off"'}]}},multiline:{defaultValue:null,description:"",name:"multiline",required:!1,type:{name:"boolean"}},rows:{defaultValue:{value:"1"},description:"",name:"rows",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"() => void"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"() => void"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"(event: KeyboardEvent<HTMLInputElement | HTMLTextAreaElement>) => void"}},onKeyDownEnter:{defaultValue:null,description:"",name:"onKeyDownEnter",required:!1,type:{name:"(event: KeyboardEvent<HTMLInputElement | HTMLTextAreaElement>) => void"}},onClickSearch:{defaultValue:null,description:"",name:"onClickSearch",required:!1,type:{name:"(event: MouseEvent<Element, MouseEvent>) => void"}},onClear:{defaultValue:null,description:"",name:"onClear",required:!1,type:{name:"() => void"}},lazy:{defaultValue:{value:"true"},description:"",name:"lazy",required:!1,type:{name:"boolean"}},rules:{defaultValue:null,description:"",name:"rules",required:!1,type:{name:"((value: any) => string | true)[]"}},successMessage:{defaultValue:null,description:"",name:"successMessage",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}}}}}catch{}export{r as T};
