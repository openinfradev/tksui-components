import{j as i}from"./jsx-runtime-ffb262ed.js";import{r as n}from"./index-76fb7be0.js";import{u as j}from"./UseValidator-1d683c89.js";const r=n.forwardRef((e,f)=>{const[d,s]=n.useState(!1),l=j(e.value,e.rules,e.successMessage),t=n.useRef(null);n.useImperativeHandle(f,()=>({focus(){var a;(a=t==null?void 0:t.current)==null||a.focus()},validate(){return l.validate()},manualValidate(a,u){l.manualValidate(a,u)}}));const o=n.useMemo(()=>{const a=[];return e.className&&a.push(e.className),e.disabled&&a.push("t-number-field--disabled"),l.result||a.push("t-number-field--failure"),l.result&&l.message&&a.push("t-number-field--success"),d&&a.push("t-number-field--focused"),a.push(`t-number-field--${e.type}`),a.join(" ")},[e.className,e.disabled,e.type,l.result,l.message,d]),b=n.useMemo(()=>{const a=[];return e.disabled&&a.push("t-number-field__container__input--disabled"),a.join(" ")},[e.disabled]),_=n.useMemo(()=>e.max!==void 0&&Number.parseInt(e.value,10)>=e.max||e.disabled?"t-number-field__container__action-icon__increment--disabled":"",[e.max,e.disabled,e.value]),y=n.useMemo(()=>e.min!==void 0&&Number.parseInt(e.value,10)<=e.min||e.disabled?"t-number-field__container__action-icon__decrement--disabled":"",[e.disabled,e.min,e.value]),v=n.useMemo(()=>{const a=[];return e.required&&a.push("t-number-field__label--required"),a.join(" ")},[d,e.value,e.required]),h=n.useMemo(()=>{let a={};return e.style&&(a={...e.style}),e.width&&(a={...a,width:e.width}),a},[e.style,e.width]),m=n.useCallback(()=>{const a=Number.parseInt(e.value,10);if(Number.isNaN(a)){t.current.value="",e.onChange("");return}const u=(a-e.min)%e.step;u!==0&&e.onChange(`${a-u}`)},[e]),N=n.useMemo(()=>e.label&&!d||e.disabled?"":e.placeholder,[e.label,d,e.disabled,e.placeholder]),g=n.useCallback(()=>{l.clearValidation(),s(!0)},[l]),C=n.useCallback(()=>{m(),e.lazy||l.validate(),s(!1)},[m,e.lazy,l]),c=n.useCallback(a=>{if(a==="")return!0;const u=Number.parseInt(a,10);return Number.isNaN(u)?!1:u>=e.min&&u<=e.max},[e.max,e.min]),q=n.useCallback(a=>{c(a.target.value)&&e.onChange(a.target.value)},[c,e]),x=n.useCallback(()=>{t.current.stepUp(),e.value!==t.current.value&&e.onChange(t.current.value)},[e]),V=n.useCallback(()=>{t.current.stepDown(),e.value!==t.current.value&&e.onChange(t.current.value)},[e]),w=n.useCallback(a=>{a.key==="-"&&e.min>=-1&&(a.preventDefault(),e.onChange(`${e.min}`)),a.key==="+"&&a.preventDefault(),a.key==="Enter"&&e.onKeyDownEnter&&e.onKeyDownEnter(a),e.onKeyDown&&e.onKeyDown(a)},[e]);return i.jsxs("div",{className:`t-number-field ${o}`,style:h,"data-testid":"number-field-root",children:[e.label&&i.jsx("label",{className:`t-number-field__label ${v}`,children:e.label}),i.jsxs("div",{className:"t-number-field__container","data-testid":"number-field-root__container",children:[i.jsx("input",{ref:t,type:"number",tabIndex:e.disabled?-1:0,className:`t-number-field__container__input ${b}`,disabled:e.disabled,placeholder:N,value:e.value,min:e.min,max:e.max,step:e.step,onChange:q,onKeyDown:w,onFocus:g,onBlur:C}),i.jsxs("div",{className:"t-number-field__container__action-icon",children:[i.jsx("div",{className:`t-number-field__container__action-icon__increment ${_}`,onClick:x,"data-testid":"number-field__increment-button",children:"▴"}),i.jsx("div",{className:`t-number-field__container__action-icon__decrement ${y}`,onClick:V,"data-testid":"number-field__decrement-button",children:"▴"})]})]}),i.jsx("div",{className:"t-number-field__details",children:i.jsx("div",{className:"t-number-field__details__message",children:l.message&&`${l.message}`})})]})});r.defaultProps={type:"outline",lazy:!0,min:-1e11,max:1e11,step:1};r.displayName="TNumberField";try{r.displayName="TNumberField",r.__docgenInfo={description:"",displayName:"TNumberField",props:{type:{defaultValue:{value:"outline"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"outline"'},{value:'"underline"'}]}},min:{defaultValue:{value:"-100000000000"},description:"",name:"min",required:!1,type:{name:"number"}},max:{defaultValue:{value:"100000000000"},description:"",name:"max",required:!1,type:{name:"number"}},step:{defaultValue:{value:"1"},description:"",name:"step",required:!1,type:{name:"number"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"(event: KeyboardEvent<HTMLInputElement>) => void"}},onKeyDownEnter:{defaultValue:null,description:"",name:"onKeyDownEnter",required:!1,type:{name:"(event: KeyboardEvent<HTMLInputElement>) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},lazy:{defaultValue:{value:"true"},description:"",name:"lazy",required:!1,type:{name:"boolean"}},rules:{defaultValue:null,description:"",name:"rules",required:!1,type:{name:"((value: any) => string | true)[]"}},successMessage:{defaultValue:null,description:"",name:"successMessage",required:!1,type:{name:"string"}}}}}catch{}export{r as T};
//# sourceMappingURL=TNumberField-74d5b180.js.map
