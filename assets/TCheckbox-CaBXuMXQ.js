import{j as c}from"./jsx-runtime-CKrituN3.js";import{r as l}from"./index-CBqU2yxZ.js";import{T as V}from"./TIcon-xlMQuwvA.js";import{u as _}from"./UseValidator-XS2alT9g.js";import{t as m}from"./ThemeToken.module-BX06fUfM.js";const d={check:"t_checkbox_on",uncheck:"t_checkbox_off",disabledUnCheck:"t_checkbox_disabled_off",indeterminate:"t_checkbox_indeterminate"},r=l.forwardRef((e,h)=>{const n=_(e.value,e.rules,e.successMessage),k=l.useRef(null),s=l.useRef(null),[t,i]=l.useState("uncheck");l.useImperativeHandle(h,()=>({focus(){var a;(a=s==null?void 0:s.current)==null||a.focus()},validate(){return n.validate()}}));const b=l.useCallback(()=>{const a=[];return e.className&&a.push(e.className),e.disabled&&a.push("t-checkbox--disabled"),n.result||a.push("t-checkbox--failure"),n.result&&n.message&&a.push("t-checkbox--success"),a.join(" ")},[e.className,e.disabled,n.result,n.message]),y=l.useCallback(()=>{let a={};return e.style&&(a={...e.style}),a},[e.style]),o=l.useMemo(()=>t==="check"||t==="indeterminate"?m.tPrimaryColor:t==="uncheck"?m.tGrayColor3:"",[t]),u=l.useCallback(()=>{typeof e.onChange=="function"&&(t==="check"?e.onChange(e.negativeValue,e.positiveValue):e.onChange(e.positiveValue))},[e,t]),f=l.useCallback(()=>{e.checked===!0?i("check"):e.checked===!1?i("uncheck"):e.indeterminate?i("indeterminate"):e.value===e.positiveValue?i("check"):i("uncheck")},[e.value,e.checked,e.indeterminate,e.positiveValue]),v=l.useCallback(()=>{u()},[u]),x=l.useCallback(()=>{e.lazy||n.validate()},[e.lazy,n]),g=l.useCallback(a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),u())},[u]),C=l.useCallback(()=>{let a="";if(t==="indeterminate")a=d.indeterminate;else if(t==="check")a=d.check;else if(t==="uncheck"&&e.disabled)a=d.disabledUnCheck;else if(t==="uncheck"&&!e.disabled)a=d.uncheck;else throw Error("Invalid status");return c.jsx(V,{xsmall:!0,className:`t-checkbox__icon t-checkbox__icon--${t}`,color:o,fill:!0,children:a})},[o,e.disabled,t]);return l.useEffect(()=>{f()},[e.value,e.indeterminate,e.checked,e.positiveValue,f]),c.jsxs("div",{ref:k,className:`t-checkbox ${b()}`,id:e.id,"data-testid":"t-checkbox-root",style:y(),children:[c.jsxs("div",{ref:s,className:"t-checkbox__container",tabIndex:e.disabled?-1:0,onFocus:n.clearValidation,onBlur:x,onKeyDown:g,onClick:v,"data-testid":"t-checkbox-container",children:[C(),c.jsx("span",{className:"t-checkbox__label",children:e.children})]}),e.rules&&c.jsx("div",{className:"t-checkbox__message",children:n.message})]})});r.defaultProps={positiveValue:!0,negativeValue:!1,checked:null,lazy:!0};r.displayName="TCheckbox";try{r.displayName="TCheckbox",r.__docgenInfo={description:"",displayName:"TCheckbox",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"TCheckboxValue"}},checked:{defaultValue:{value:"null"},description:"",name:"checked",required:!1,type:{name:"boolean"}},indeterminate:{defaultValue:null,description:"",name:"indeterminate",required:!1,type:{name:"boolean"}},positiveValue:{defaultValue:{value:"true"},description:"",name:"positiveValue",required:!1,type:{name:"string | boolean"}},negativeValue:{defaultValue:{value:"false"},description:"",name:"negativeValue",required:!1,type:{name:"string | boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(value: string | boolean, positiveValue?: string | boolean) => void"}},lazy:{defaultValue:{value:"true"},description:"",name:"lazy",required:!1,type:{name:"boolean"}},rules:{defaultValue:null,description:"",name:"rules",required:!1,type:{name:"((value: any) => string | true)[]"}},successMessage:{defaultValue:null,description:"",name:"successMessage",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}}}}}catch{}export{r as T};
